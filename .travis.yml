language: php
php:
  - '7.1'

# Cache composer packages so "composer install" is faster
cache:
  directories:
    - $HOME/.composer/cache/files

services:
  - mysql

# Define an environment variable
env:
  - SYMFONY_VERSION="3.0.*" DB=mysql

before_script:
  - cp app/config/parameters.yml.travis app/config/parameters.yml
  - composer install
  - php bin/console doctrine:database:create --env=dev
  - php bin/console doctrine:schema:create --env=dev
  - php bin/console hautelook:fixtures:load --env=dev --quiet

notifications:
  email:
    -  davidlarrimore@gmail.com

addons:
  sonarcloud:
    organization: "frmanager-github" # the key of the org you chose at step #3
    token:
      secure: "Bjsrh3XhyoR20aLpb0/JGsOhmDCHI2Wz5u2yLl5NFDIvu94xm1cKgfLSJXKya3SmHMEUaCVJ5mAzeDaMUc3y860X1hWwpsIBkXZV8O68KB8NKNkYjXFzbY5pZnAtUa1PQ8JcDZBM/b8WVWdEOK6f/6MZ1JvjvdzHh6RzNVi/4RIDYx0lODhRrYD9cBm5z0Q+2yxZIbGZz12nE0UcBnbf52Oxpwmu47mlSRkhIQYjIJrJSA1arh50U6EBlwS0CmauSSrfNE3rpmiApjkLHDXth8dSdICmiFCnBxEz1DGbJPSwXEZYGkL4U5CzkiWe+O+KZEUuo5XeruPA98Q0zaLpeO3dq5JpSRWplRBYEldKDiTCklPuS/Y1HRWj0G3d52o3m3gH+EjOpTNYfqCYx7cOFUVwhpghPTYPRb5DJ2sM1uZGwHQygcUP4WZe+k+ULao/3XegU5scAfeavWf87B9+ptrI1tpKJtZddFXuDqDcK4gNDparjSJVpxlMcvj/9eH7s8qSL7ivBf6wnhWelJAjbmPhtU9N5Ru0s25qoBhN2BOnhrKK8iqew/wGcF8+Qc0fajXRhIyaikw9p6aBMX0hEtCedfo6fPQ1im7jBTQP3zodN7fpDunpdSO2PG1x3h28U+P/gGRjKEyRbiXd3Iz2GudU+Y3+y26piPNNDJb6GYk="

script:
  - phpunit
  - sonar-scanner
